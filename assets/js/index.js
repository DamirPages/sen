window.closeModal=e=>{document.querySelector(e).classList.remove("active"),document.body.style.overflow=""};window.openModal=e=>{document.querySelector(e).classList.add("active"),document.body.style.overflow="hidden"};const _=document.querySelectorAll(".modal__overlay, [data-modal-close]"),B=document.querySelectorAll("[data-modal-open]"),z=document.querySelectorAll("[data-change-modal]");B.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-modal-open");window.openModal(t)})});z.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-change-modal");console.log(e);const l=e.closest(".modal").getAttribute("id");window.closeModal(`#${l}`),window.openModal(t)})});_.forEach(e=>{const t=e.closest(".modal").getAttribute("id");e.addEventListener("click",()=>window.closeModal(`#${t}`))});const F=document.querySelectorAll("a");F.forEach(e=>{e.addEventListener("click",t=>{e.getAttribute("href")==="#"&&t.preventDefault()})});const g=document.querySelector(".modal-cookie");if(g){const e=document.querySelectorAll("[data-cookie-close]"),t=document.querySelector("[data-cookie-accept]");e.forEach(l=>{l.addEventListener("click",()=>{g.classList.remove("active")})}),t.addEventListener("click",()=>{localStorage.setItem("cookieAcept","1"),g.classList.remove("active")});var R=localStorage.getItem("cookieAcept");R||g.classList.add("active")}const C=document.querySelector(".menu-button"),q=document.querySelector(".mobile-menu");C&&q&&(C.addEventListener("click",()=>{q.classList.toggle("active")}),document.querySelectorAll(".mobile-menu-link").forEach(t=>{t.addEventListener("click",()=>{q.classList.remove("active")})}));document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("input[data-tel-input]"),t=function(o){return o.value.replace(/\D/g,"")},l=function(o){let i=o.target,n=t(i),u=o.clipboardData||window.clipboardData;if(u){let a=u.getData("Text");if(/\D/g.test(a)){i.value=n;return}}},r=function(o){let i=o.target,n=t(i),{selectionStart:u}=i,a="";if(!n)return i.value="";if(i.value.length!=u){o.data&&/\D/g.test(o.data)&&(i.value=n);return}if(["7","8","9"].indexOf(n[0])>-1){n[0]=="9"&&(n="7"+n);let b=n[0]=="8"?"8":"+7";a=i.value=b+" ",n.length>1&&(a+="("+n.substring(1,4)),n.length>=5&&(a+=") "+n.substring(4,7)),n.length>=8&&(a+="-"+n.substring(7,9)),n.length>=10&&(a+="-"+n.substring(9,11))}else a="+"+n.substring(0,16);i.value=a},d=function(o){let i=o.target.value.replace(/\D/g,"");o.keyCode==8&&i.length==1&&(o.target.value="")};for(let o of e)o.addEventListener("keydown",d),o.addEventListener("input",r,!1),o.addEventListener("paste",l,!1)});const N=document.querySelectorAll(".input, .textarea");N.forEach(e=>{e.addEventListener("input",()=>{e.value.length>0?e.classList.add("input--filled"):e.classList.remove("input--filled")})});function U(){const e=document.querySelector(".test__container");if(!e)return;const t=e.querySelectorAll(".test__item"),l=document.querySelector("#current-question"),r=document.querySelector("#total-questions"),d=document.querySelector("#progress"),o=document.querySelector("#progress-bar");r&&(r.textContent=t.length),l&&(l.textContent=1),d.textContent="0%",o.style.width="0%",t.forEach((i,n)=>{const u=i.querySelectorAll("input"),a=i.querySelector(".modal__button");u.forEach(b=>{b.addEventListener("change",()=>{!!i.querySelector("input:checked")?a.disabled=!1:a.disabled=!0})}),a.addEventListener("click",()=>{n+1<t.length&&(e.querySelector(".test__item.active").classList.remove("active"),t[n+1].classList.add("active"),l.textContent=n+2,d.textContent=`${Math.round((n+1)/t.length*100)}%`,o.style.width=`${Math.round((n+1)/t.length*100)}%`)})})}U();let v=288,f=0,x=!1,c=null,s=null,E=null,y=null,L=null,M=null,m=null,k=null,A=null,w=null,S=null,I=null,h=null;const p=document.querySelector("#check-input"),$=document.querySelector(".upload-file");function P(){c=document.getElementById("video"),s=document.getElementById("canvas"),E=document.getElementById("photo"),y=document.getElementById("startbutton"),L=document.getElementById("savebutton"),m=document.getElementById("imgContainer"),k=document.querySelector("#file-name"),A=document.querySelector("#file-size"),w=document.querySelector("#file-format"),S=document.querySelector("#result-file-info"),I=document.querySelector(".result__close"),h=document.querySelector("#final-result-file"),!(!p||!$)&&(y.addEventListener("click",function(e){m.classList.add("hide"),c.classList.remove("hide"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(t){c.srcObject=t,c.play(),y.classList.add("hide"),L.classList.remove("hide"),M=t.getTracks()[0]}).catch(function(t){console.log("An error occurred: "+t)})}),c.addEventListener("canplay",function(e){x||(f=c.videoHeight/(c.videoWidth/v),c.setAttribute("width",v),c.setAttribute("height",f),s.setAttribute("width",v),s.setAttribute("height",f),x=!0)},!1),L.addEventListener("click",function(e){V(),e.preventDefault()},!1),p.addEventListener("change",function(e){const t=e.target.files[0];if(t){const l=`${(Math.round(+t.size/1024)/1e3).toFixed(2)}MB`,r=t.name.split(".").pop().toUpperCase(),d=t.name;k.textContent=d,A.textContent=l,w.textContent=r;const o=new FileReader;o.readAsDataURL(t),o.addEventListener("load",function(){E.setAttribute("src",o.result)}),m.classList.remove("hide"),S.classList.remove("hide"),T(t,h)}else S.classList.add("hide"),h.value="",m.classList.add("hide")}),I.addEventListener("click",function(e){p.value=null,p.dispatchEvent(new Event("change")),m.classList.add("hide")}),D())}function D(){let e=s.getContext("2d");e.fillStyle="#AAA",e.fillRect(0,0,s.width,s.height);let t=s.toDataURL("image/png");E.setAttribute("src",t),h.value=""}function V(){let e=s.getContext("2d");if(f){s.width=v,s.height=f,e.drawImage(c,0,0,v,f);let t=s.toDataURL("image/png");E.setAttribute("src",t),h.value=t,k.textContent="Фото с камеры",A.textContent=Q(t),w.textContent="PNG",S.classList.remove("hide")}else D();y.classList.remove("hide"),L.classList.add("hide"),M.stop(),c.classList.add("hide"),m.classList.remove("hide")}function T(e,t){t.value="";let l=new FileReader;l.readAsDataURL(e),l.onload=function(){t.value=l.result},l.onerror=function(r){console.log("Error: ",r)}}function Q(e){let t=1;e.endsWith("==")&&(t=2);const l=e.length*(3/4)-t;return`${(+Math.round(l/1024)/1e3).toFixed(2)}MB`}P();
