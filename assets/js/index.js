window.closeModal=t=>{document.querySelector(t).classList.remove("active"),document.body.style.overflow=""};window.openModal=t=>{document.querySelector(t).classList.add("active"),document.body.style.overflow="hidden"};const B=document.querySelectorAll(".modal__overlay, [data-modal-close]"),k=document.querySelectorAll("[data-modal-open]");k.forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-modal-open");window.openModal(e)})});B.forEach(t=>{const e=t.closest(".modal").getAttribute("id");t.addEventListener("click",()=>window.closeModal(`#${e}`))});const I=document.querySelectorAll(".input");I.forEach(t=>{t.addEventListener("input",()=>{t.value.length>0?t.classList.add("input--filled"):t.classList.remove("input--filled")})});function M(){const t=document.querySelector(".test__container");if(!t)return;const e=t.querySelectorAll(".test__item"),n=document.querySelector("#current-question"),s=document.querySelector("#total-questions"),m=document.querySelector("#progress"),i=document.querySelector("#progress-bar");s&&(s.textContent=e.length),n&&(n.textContent=1),m.textContent="0%",i.style.width="0%",e.forEach((p,r)=>{const x=p.querySelectorAll("input"),L=p.querySelector(".modal__button");x.forEach(_=>{_.addEventListener("change",()=>{!!p.querySelector("input:checked")?L.disabled=!1:L.disabled=!0})}),L.addEventListener("click",()=>{r+1<e.length&&(t.querySelector(".test__item.active").classList.remove("active"),e[r+1].classList.add("active"),n.textContent=r+2,m.textContent=`${Math.round((r+1)/e.length*100)}%`,i.style.width=`${Math.round((r+1)/e.length*100)}%`)})})}M();let d=288,a=0,b=!1,o=null,l=null,y=null,f=null,v=null,A=null,c=null,S=null,E=null,q=null,g=null,w=null,u=null;const h=document.querySelector("#check-input"),z=document.querySelector(".upload-file");function F(){o=document.getElementById("video"),l=document.getElementById("canvas"),y=document.getElementById("photo"),f=document.getElementById("startbutton"),v=document.getElementById("savebutton"),c=document.getElementById("imgContainer"),S=document.querySelector("#file-name"),E=document.querySelector("#file-size"),q=document.querySelector("#file-format"),g=document.querySelector("#result-file-info"),w=document.querySelector(".result__close"),u=document.querySelector("#final-result-file"),!(!h||!z)&&(f.addEventListener("click",function(t){c.classList.add("hide"),o.classList.remove("hide"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(e){o.srcObject=e,o.play(),f.classList.add("hide"),v.classList.remove("hide"),A=e.getTracks()[0]}).catch(function(e){console.log("An error occurred: "+e)})}),o.addEventListener("canplay",function(t){b||(a=o.videoHeight/(o.videoWidth/d),o.setAttribute("width",d),o.setAttribute("height",a),l.setAttribute("width",d),l.setAttribute("height",a),b=!0)},!1),v.addEventListener("click",function(t){R(),t.preventDefault()},!1),h.addEventListener("change",function(t){const e=t.target.files[0];if(e){const n=`${(Math.round(+e.size/1024)/1e3).toFixed(2)}MB`,s=e.name.split(".").pop().toUpperCase(),m=e.name;S.textContent=m,E.textContent=n,q.textContent=s;const i=new FileReader;i.readAsDataURL(e),i.addEventListener("load",function(){y.setAttribute("src",i.result)}),c.classList.remove("hide"),g.classList.remove("hide"),D(e,u)}else g.classList.add("hide"),u.value="",c.classList.add("hide")}),w.addEventListener("click",function(t){h.value=null,h.dispatchEvent(new Event("change")),c.classList.add("hide")}),C())}function C(){let t=l.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,l.width,l.height);let e=l.toDataURL("image/png");y.setAttribute("src",e),u.value=""}function R(){let t=l.getContext("2d");if(a){l.width=d,l.height=a,t.drawImage(o,0,0,d,a);let e=l.toDataURL("image/png");y.setAttribute("src",e),u.value=e,S.textContent="Фото с камеры",E.textContent=U(e),q.textContent="PNG",g.classList.remove("hide")}else C();f.classList.remove("hide"),v.classList.add("hide"),A.stop(),o.classList.add("hide"),c.classList.remove("hide")}function D(t,e){e.value="";let n=new FileReader;n.readAsDataURL(t),n.onload=function(){e.value=n.result},n.onerror=function(s){console.log("Error: ",s)}}function U(t){let e=1;t.endsWith("==")&&(e=2);const n=t.length*(3/4)-e;return`${(+Math.round(n/1024)/1e3).toFixed(2)}MB`}F();
