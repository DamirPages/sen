window.closeModal=t=>{document.querySelector(t).classList.remove("active"),document.body.style.overflow=""};window.openModal=t=>{document.querySelector(t).classList.add("active"),document.body.style.overflow="hidden"};const I=document.querySelectorAll(".modal__overlay, [data-modal-close]"),z=document.querySelectorAll("[data-modal-open]");z.forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-modal-open");window.openModal(e)})});I.forEach(t=>{const e=t.closest(".modal").getAttribute("id");t.addEventListener("click",()=>window.closeModal(`#${e}`))});const F=document.querySelectorAll("a");F.forEach(t=>{t.addEventListener("click",e=>{t.getAttribute("href")==="#"&&e.preventDefault()})});const f=document.querySelector(".modal-cookie");if(f){const t=document.querySelectorAll("[data-cookie-close]"),e=document.querySelector("[data-cookie-accept]");t.forEach(o=>{o.addEventListener("click",()=>{f.classList.remove("active")})}),e.addEventListener("click",()=>{localStorage.setItem("cookieAcept","1"),f.classList.remove("active")});var D=localStorage.getItem("cookieAcept");D||f.classList.add("active")}const A=document.querySelector(".menu-button"),E=document.querySelector(".mobile-menu");A&&E&&(A.addEventListener("click",()=>{E.classList.toggle("active")}),document.querySelectorAll(".mobile-menu-link").forEach(e=>{e.addEventListener("click",()=>{E.classList.remove("active")})}));const R=document.querySelectorAll(".input, .textarea");R.forEach(t=>{t.addEventListener("input",()=>{t.value.length>0?t.classList.add("input--filled"):t.classList.remove("input--filled")})});function U(){const t=document.querySelector(".test__container");if(!t)return;const e=t.querySelectorAll(".test__item"),o=document.querySelector("#current-question"),c=document.querySelector("#total-questions"),m=document.querySelector("#progress"),i=document.querySelector("#progress-bar");c&&(c.textContent=e.length),o&&(o.textContent=1),m.textContent="0%",i.style.width="0%",e.forEach((p,r)=>{const _=p.querySelectorAll("input"),S=p.querySelector(".modal__button");_.forEach(B=>{B.addEventListener("change",()=>{!!p.querySelector("input:checked")?S.disabled=!1:S.disabled=!0})}),S.addEventListener("click",()=>{r+1<e.length&&(t.querySelector(".test__item.active").classList.remove("active"),e[r+1].classList.add("active"),o.textContent=r+2,m.textContent=`${Math.round((r+1)/e.length*100)}%`,i.style.width=`${Math.round((r+1)/e.length*100)}%`)})})}U();let d=288,a=0,C=!1,n=null,l=null,L=null,h=null,g=null,x=null,s=null,q=null,b=null,k=null,y=null,w=null,u=null;const v=document.querySelector("#check-input"),$=document.querySelector(".upload-file");function N(){n=document.getElementById("video"),l=document.getElementById("canvas"),L=document.getElementById("photo"),h=document.getElementById("startbutton"),g=document.getElementById("savebutton"),s=document.getElementById("imgContainer"),q=document.querySelector("#file-name"),b=document.querySelector("#file-size"),k=document.querySelector("#file-format"),y=document.querySelector("#result-file-info"),w=document.querySelector(".result__close"),u=document.querySelector("#final-result-file"),!(!v||!$)&&(h.addEventListener("click",function(t){s.classList.add("hide"),n.classList.remove("hide"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(e){n.srcObject=e,n.play(),h.classList.add("hide"),g.classList.remove("hide"),x=e.getTracks()[0]}).catch(function(e){console.log("An error occurred: "+e)})}),n.addEventListener("canplay",function(t){C||(a=n.videoHeight/(n.videoWidth/d),n.setAttribute("width",d),n.setAttribute("height",a),l.setAttribute("width",d),l.setAttribute("height",a),C=!0)},!1),g.addEventListener("click",function(t){Q(),t.preventDefault()},!1),v.addEventListener("change",function(t){const e=t.target.files[0];if(e){const o=`${(Math.round(+e.size/1024)/1e3).toFixed(2)}MB`,c=e.name.split(".").pop().toUpperCase(),m=e.name;q.textContent=m,b.textContent=o,k.textContent=c;const i=new FileReader;i.readAsDataURL(e),i.addEventListener("load",function(){L.setAttribute("src",i.result)}),s.classList.remove("hide"),y.classList.remove("hide"),T(e,u)}else y.classList.add("hide"),u.value="",s.classList.add("hide")}),w.addEventListener("click",function(t){v.value=null,v.dispatchEvent(new Event("change")),s.classList.add("hide")}),M())}function M(){let t=l.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,l.width,l.height);let e=l.toDataURL("image/png");L.setAttribute("src",e),u.value=""}function Q(){let t=l.getContext("2d");if(a){l.width=d,l.height=a,t.drawImage(n,0,0,d,a);let e=l.toDataURL("image/png");L.setAttribute("src",e),u.value=e,q.textContent="Фото с камеры",b.textContent=W(e),k.textContent="PNG",y.classList.remove("hide")}else M();h.classList.remove("hide"),g.classList.add("hide"),x.stop(),n.classList.add("hide"),s.classList.remove("hide")}function T(t,e){e.value="";let o=new FileReader;o.readAsDataURL(t),o.onload=function(){e.value=o.result},o.onerror=function(c){console.log("Error: ",c)}}function W(t){let e=1;t.endsWith("==")&&(e=2);const o=t.length*(3/4)-e;return`${(+Math.round(o/1024)/1e3).toFixed(2)}MB`}N();
