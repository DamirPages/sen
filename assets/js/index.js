window.closeModal=e=>{document.querySelector(e).classList.remove("active"),document.body.style.overflow=""};window.openModal=e=>{document.querySelector(e).classList.add("active"),document.body.style.overflow="hidden"};const _=document.querySelectorAll(".modal__overlay, [data-modal-close]"),z=document.querySelectorAll("[data-modal-open]"),F=document.querySelectorAll("[data-change-modal]");z.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-modal-open");window.openModal(t)})});F.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-change-modal");console.log(e);const l=e.closest(".modal").getAttribute("id");window.closeModal(`#${l}`),window.openModal(t)})});_.forEach(e=>{const t=e.closest(".modal").getAttribute("id");e.addEventListener("click",()=>window.closeModal(`#${t}`))});const R=document.querySelectorAll("a");R.forEach(e=>{e.addEventListener("click",t=>{e.getAttribute("href")==="#"&&t.preventDefault()})});const g=document.querySelector(".modal-cookie");if(g){const e=document.querySelectorAll("[data-cookie-close]"),t=document.querySelector("[data-cookie-accept]");e.forEach(l=>{l.addEventListener("click",()=>{g.classList.remove("active")})}),t.addEventListener("click",()=>{localStorage.setItem("cookieAcept","1"),g.classList.remove("active")});var N=localStorage.getItem("cookieAcept");N||g.classList.add("active")}const x=document.querySelector(".menu-button"),q=document.querySelector(".mobile-menu");x&&q&&(x.addEventListener("click",()=>{q.classList.toggle("active")}),document.querySelectorAll(".mobile-menu-link").forEach(t=>{t.addEventListener("click",()=>{q.classList.remove("active")})}));document.addEventListener("DOMContentLoaded",function(){let e=document.querySelectorAll("input[data-tel-input]"),t=function(o){return o.value.replace(/\D/g,"")},l=function(o){let s=o.target,n=t(s),u=o.clipboardData||window.clipboardData;if(u){let i=u.getData("Text");if(/\D/g.test(i)){s.value=n;return}}},r=function(o){let s=o.target,n=t(s),{selectionStart:u}=s,i="";if(!n)return s.value="";if(s.value.length!=u){o.data&&/\D/g.test(o.data)&&(s.value=n);return}if(["7","8","9"].indexOf(n[0])>-1){n[0]=="9"&&(n="7"+n);let E=n[0]=="8"?"8":"+7";i=s.value=E+" ",n.length>1&&(i+="("+n.substring(1,4)),n.length>=5&&(i+=") "+n.substring(4,7)),n.length>=8&&(i+="-"+n.substring(7,9)),n.length>=10&&(i+="-"+n.substring(9,11))}else i="+"+n.substring(0,16);s.value=i},d=function(o){let s=o.target.value.replace(/\D/g,"");o.keyCode==8&&s.length==1&&(o.target.value="")};for(let o of e)o.addEventListener("keydown",d),o.addEventListener("input",r,!1),o.addEventListener("paste",l,!1)});const k=document.querySelector(".scroll-button");k&&document.addEventListener("scroll",()=>{window.scrollY>window.innerHeight?k.classList.add("active"):k.classList.remove("active")});const U=document.querySelectorAll("[data-disabled-button]");U.forEach(e=>{e.addEventListener("change",()=>{const t=e.closest("form").querySelector("[data-submit-button]"),l=e.closest("form").querySelectorAll("[data-disabled-button]");Array.from(l).every(d=>d.checked)?t.classList.remove("disabled"):t.classList.add("disabled")})});const $=document.querySelectorAll(".input, .textarea");$.forEach(e=>{e.addEventListener("input",()=>{e.value.length>0?e.classList.add("input--filled"):e.classList.remove("input--filled")})});function P(){const e=document.querySelector(".test__container");if(!e)return;const t=e.querySelectorAll(".test__item"),l=document.querySelector("#current-question"),r=document.querySelector("#total-questions"),d=document.querySelector("#progress"),o=document.querySelector("#progress-bar");r&&(r.textContent=t.length),l&&(l.textContent=1),d.textContent="0%",o.style.width="0%",t.forEach((s,n)=>{const u=s.querySelectorAll("input"),i=s.querySelector(".modal__button");u.forEach(E=>{E.addEventListener("change",()=>{!!s.querySelector("input:checked")?i.disabled=!1:i.disabled=!0})}),i.addEventListener("click",()=>{n+1<t.length&&(e.querySelector(".test__item.active").classList.remove("active"),t[n+1].classList.add("active"),l.textContent=n+2,d.textContent=`${Math.round((n+1)/t.length*100)}%`,o.style.width=`${Math.round((n+1)/t.length*100)}%`)})})}P();let h=288,f=0,I=!1,a=null,c=null,S=null,y=null,L=null,D=null,m=null,A=null,w=null,C=null,b=null,M=null,v=null;const p=document.querySelector("#check-input"),V=document.querySelector(".upload-file");function T(){a=document.getElementById("video"),c=document.getElementById("canvas"),S=document.getElementById("photo"),y=document.getElementById("startbutton"),L=document.getElementById("savebutton"),m=document.getElementById("imgContainer"),A=document.querySelector("#file-name"),w=document.querySelector("#file-size"),C=document.querySelector("#file-format"),b=document.querySelector("#result-file-info"),M=document.querySelector(".result__close"),v=document.querySelector("#final-result-file"),!(!p||!V)&&(y.addEventListener("click",function(e){m.classList.add("hide"),a.classList.remove("hide"),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(function(t){a.srcObject=t,a.play(),y.classList.add("hide"),L.classList.remove("hide"),D=t.getTracks()[0]}).catch(function(t){console.log("An error occurred: "+t)})}),a.addEventListener("canplay",function(e){I||(f=a.videoHeight/(a.videoWidth/h),a.setAttribute("width",h),a.setAttribute("height",f),c.setAttribute("width",h),c.setAttribute("height",f),I=!0)},!1),L.addEventListener("click",function(e){H(),e.preventDefault()},!1),p.addEventListener("change",function(e){const t=e.target.files[0];if(t){const l=`${(Math.round(+t.size/1024)/1e3).toFixed(2)}MB`,r=t.name.split(".").pop().toUpperCase(),d=t.name;A.textContent=d,w.textContent=l,C.textContent=r;const o=new FileReader;o.readAsDataURL(t),o.addEventListener("load",function(){S.setAttribute("src",o.result)}),m.classList.remove("hide"),b.classList.remove("hide"),Q(t,v)}else b.classList.add("hide"),v.value="",m.classList.add("hide")}),M.addEventListener("click",function(e){p.value=null,p.dispatchEvent(new Event("change")),m.classList.add("hide")}),B())}function B(){let e=c.getContext("2d");e.fillStyle="#AAA",e.fillRect(0,0,c.width,c.height);let t=c.toDataURL("image/png");S.setAttribute("src",t),v.value=""}function H(){let e=c.getContext("2d");if(f){c.width=h,c.height=f,e.drawImage(a,0,0,h,f);let t=c.toDataURL("image/png");S.setAttribute("src",t),v.value=t,A.textContent="Фото с камеры",w.textContent=W(t),C.textContent="PNG",b.classList.remove("hide")}else B();y.classList.remove("hide"),L.classList.add("hide"),D.stop(),a.classList.add("hide"),m.classList.remove("hide")}function Q(e,t){t.value="";let l=new FileReader;l.readAsDataURL(e),l.onload=function(){t.value=l.result},l.onerror=function(r){console.log("Error: ",r)}}function W(e){let t=1;e.endsWith("==")&&(t=2);const l=e.length*(3/4)-t;return`${(+Math.round(l/1024)/1e3).toFixed(2)}MB`}T();
